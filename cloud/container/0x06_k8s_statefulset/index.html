



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://islibra.github.io/hello-islibra/cloud/container/0x06_k8s_statefulset/">
      
      
        <meta name="author" content="李晓龙">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="ja">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>0x06_k8s_statefulset - islibra</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#00bcd4">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="cyan" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#0x06_k8s_statefulset" tabindex="1" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://islibra.github.io/hello-islibra/" title="islibra" class="md-header-nav__button md-logo">
          
            <i class="md-icon">cloud</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              islibra
            </span>
            <span class="md-header-nav__topic">
              0x06_k8s_statefulset
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/islibra/wiki/" title="前往 Github 仓库" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    islibra/wiki
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://islibra.github.io/hello-islibra/" title="islibra" class="md-nav__button md-logo">
      
        <i class="md-icon">cloud</i>
      
    </a>
    islibra
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/islibra/wiki/" title="前往 Github 仓库" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    islibra/wiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="README" class="md-nav__link">
      README
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Cloud
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Cloud
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OpenShift/" title="OpenShift" class="md-nav__link">
      OpenShift
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../云端实验室/" title="云端实验室" class="md-nav__link">
      云端实验室
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../知识地图/" title="知识地图" class="md-nav__link">
      知识地图
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Ai
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Ai
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ai/AI/" title="AI" class="md-nav__link">
      AI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../ai/softcom_plus_ai/" title="softcom" class="md-nav__link">
      softcom
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5" checked>
    
    <label class="md-nav__link" for="nav-2-5">
      Container
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Container
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../0x00_Kubernetes/" title="0x00_Kubernetes" class="md-nav__link">
      0x00_Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x01_Kubernetes存储/" title="0x01_Kubernetes存储" class="md-nav__link">
      0x01_Kubernetes存储
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x02_Kubenetes网络/" title="0x02_Kubenetes网络" class="md-nav__link">
      0x02_Kubenetes网络
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x03_k8s_secret/" title="0x03_k8s_secret" class="md-nav__link">
      0x03_k8s_secret
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x04_k8s_rolling_update_healthcheck/" title="0x04_k8s_rolling_update_healthcheck" class="md-nav__link">
      0x04_k8s_rolling_update_healthcheck
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        0x06_k8s_statefulset
      </label>
    
    <a href="./" title="0x06_k8s_statefulset" class="md-nav__link md-nav__link--active">
      0x06_k8s_statefulset
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#i-nginx" title="I. 部署 nginx" class="md-nav__link">
    I. 部署 nginx
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iii-terminationgraceperiodseconds" title="III. terminationGracePeriodSeconds" class="md-nav__link">
    III. terminationGracePeriodSeconds
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i-zookeeper" title="I. 部署 ZooKeeper" class="md-nav__link">
    I. 部署 ZooKeeper
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ii-docker" title="II. 准备 Docker 镜像" class="md-nav__link">
    II. 准备 Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ii-zookeeper-statefulset" title="II. 创建 ZooKeeper StatefulSet" class="md-nav__link">
    II. 创建 ZooKeeper StatefulSet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ii" title="II. 验证" class="md-nav__link">
    II. 验证
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i-kafka" title="I. 部署 Kafka" class="md-nav__link">
    I. 部署 Kafka
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="评论" class="md-nav__link md-nav__link--active">
            评论
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x10_Docker/" title="0x10_Docker" class="md-nav__link">
      0x10_Docker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x11_Dockerfile/" title="0x11_Dockerfile" class="md-nav__link">
      0x11_Dockerfile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x12_本地Registry/" title="0x12_本地Registry" class="md-nav__link">
      0x12_本地Registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x90_client-go/" title="[0x90_client-go](https://github.com/kubernetes/client-go)" class="md-nav__link">
      [0x90_client-go](https://github.com/kubernetes/client-go)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../0x91_kubernetes-sigs/" title="0x91_kubernetes-sigs" class="md-nav__link">
      0x91_kubernetes-sigs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker_cgroup/" title="docker_cgroup" class="md-nav__link">
      docker_cgroup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Gfw
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-6">
        Gfw
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../gfw/proxy/" title="proxy" class="md-nav__link">
      proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../gfw/vps/" title="vps" class="md-nav__link">
      vps
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7">
    
    <label class="md-nav__link" for="nav-2-7">
      Middleware
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-7">
        Middleware
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../middleware/kafka/" title="kafka" class="md-nav__link">
      kafka
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middleware/memcached/" title="memcached" class="md-nav__link">
      memcached
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middleware/prometheus/" title="prometheus" class="md-nav__link">
      prometheus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middleware/redis/" title="redis" class="md-nav__link">
      redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../middleware/zookeeper/" title="zookeeper" class="md-nav__link">
      zookeeper
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8" type="checkbox" id="nav-2-8">
    
    <label class="md-nav__link" for="nav-2-8">
      Openstack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-8">
        Openstack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/0x00_网络虚拟化/" title="0x00_网络虚拟化" class="md-nav__link">
      0x00_网络虚拟化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/0x01_实验环境/" title="0x01_实验环境" class="md-nav__link">
      0x01_实验环境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/0x02_架构/" title="0x02_架构" class="md-nav__link">
      0x02_架构
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/0x03_neutron/" title="0x03_neutron" class="md-nav__link">
      0x03_neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/0x04_neutron_Routing/" title="0x04_neutron_Routing" class="md-nav__link">
      0x04_neutron_Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/Neutron_LBaaS/" title="Neutron_LBaaS" class="md-nav__link">
      Neutron_LBaaS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/OVS/" title="OVS" class="md-nav__link">
      OVS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/VxLAN/" title="VxLAN" class="md-nav__link">
      VxLAN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/openstack常用命令/" title="openstack常用命令" class="md-nav__link">
      openstack常用命令
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/大页内存/" title="大页内存" class="md-nav__link">
      大页内存
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../openstack/虚拟化/" title="虚拟化" class="md-nav__link">
      虚拟化
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Coding
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Coding
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/yaml/" title="yaml" class="md-nav__link">
      yaml
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/各语言语法对比/" title="各语言语法对比" class="md-nav__link">
      各语言语法对比
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      C
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        C
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/c/C语言安全编程/" title="C语言安全编程" class="md-nav__link">
      C语言安全编程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/c/exec/" title="exec" class="md-nav__link">
      exec
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/c/helloworld/" title="helloworld" class="md-nav__link">
      helloworld
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/c/snprintf/" title="snprintf" class="md-nav__link">
      snprintf
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Db
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        Db
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/0x00_SQL/" title="0x00_SQL" class="md-nav__link">
      0x00_SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/0x10_Ubuntu16.04安装MySQL/" title="0x10_Ubuntu16.04安装MySQL" class="md-nav__link">
      0x10_Ubuntu16.04安装MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/Druid/" title="Druid" class="md-nav__link">
      Druid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/MongoDB/" title="MongoDB" class="md-nav__link">
      MongoDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/MyBatis/" title="MyBatis" class="md-nav__link">
      MyBatis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/MySQL/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/SQLite/" title="SQLite" class="md-nav__link">
      SQLite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/SQL基本数据类型/" title="SQL基本数据类型" class="md-nav__link">
      SQL基本数据类型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/spring_mybatis/" title="spring_mybatis" class="md-nav__link">
      spring_mybatis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/事务/" title="事务" class="md-nav__link">
      事务
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/db/数据库中间件/" title="数据库中间件" class="md-nav__link">
      数据库中间件
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Go
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        Go
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/go/beego/" title="beego" class="md-nav__link">
      beego
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/go/go语言安全编程/" title="go语言安全编程" class="md-nav__link">
      go语言安全编程
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/go/hellogo/" title="hellogo" class="md-nav__link">
      hellogo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/go/线程/" title="线程" class="md-nav__link">
      线程
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6">
    
    <label class="md-nav__link" for="nav-3-6">
      Java
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        Java
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x00_hellojava/" title="0x00_hellojava" class="md-nav__link">
      0x00_hellojava
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x01_编译运行/" title="0x01_编译运行" class="md-nav__link">
      0x01_编译运行
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x02_深入理解JVM/" title="0x02_深入理解JVM" class="md-nav__link">
      0x02_深入理解JVM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x03_基本数据类型及转换/" title="0x03_基本数据类型及转换" class="md-nav__link">
      0x03_基本数据类型及转换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x04_运算符/" title="0x04_运算符" class="md-nav__link">
      0x04_运算符
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x05_流程控制/" title="0x05_流程控制" class="md-nav__link">
      0x05_流程控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x06_异常/" title="0x06_异常" class="md-nav__link">
      0x06_异常
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x07_Collection/" title="0x07_Collection" class="md-nav__link">
      0x07_Collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x08_泛型/" title="0x08_泛型" class="md-nav__link">
      0x08_泛型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x09_多线程和锁/" title="0x09_多线程和锁" class="md-nav__link">
      0x09_多线程和锁
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x0A_文件读写/" title="0x0A_文件读写" class="md-nav__link">
      0x0A_文件读写
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x0B_Socket通信/" title="0x0B_Socket通信" class="md-nav__link">
      0x0B_Socket通信
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x0C_序列化/" title="0x0C_序列化" class="md-nav__link">
      0x0C_序列化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x0D_反射/" title="0x0D_反射" class="md-nav__link">
      0x0D_反射
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x0E_断言/" title="0x0E_断言" class="md-nav__link">
      0x0E_断言
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x0F_JavaDoc/" title="0x0F_JavaDoc" class="md-nav__link">
      0x0F_JavaDoc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x10_SSL/" title="0x10_SSL" class="md-nav__link">
      0x10_SSL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x11_JMX/" title="0x11_JMX" class="md-nav__link">
      0x11_JMX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x12_Lambda表达式/" title="0x12_Lambda表达式" class="md-nav__link">
      0x12_Lambda表达式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0x13_Stream/" title="0x13_Stream" class="md-nav__link">
      0x13_Stream
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0xFB_单元测试/" title="0xFB_单元测试" class="md-nav__link">
      0xFB_单元测试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0xFC_SQL/" title="0xFC_SQL" class="md-nav__link">
      0xFC_SQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0xFD_JSON解析/" title="0xFD_JSON解析" class="md-nav__link">
      0xFD_JSON解析
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0xFE_编程规范/" title="0xFE_编程规范" class="md-nav__link">
      0xFE_编程规范
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/0xFF_字符编码/" title="0xFF_字符编码" class="md-nav__link">
      0xFF_字符编码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/Annotation/" title="Annotation" class="md-nav__link">
      Annotation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/JNDI/" title="JNDI" class="md-nav__link">
      JNDI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/Java读取properties配置文件/" title="Java读取properties配置文件" class="md-nav__link">
      Java读取properties配置文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/Linux设置Java环境变量/" title="Linux设置Java环境变量" class="md-nav__link">
      Linux设置Java环境变量
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/NTPClient/" title="NTPClient" class="md-nav__link">
      NTPClient
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/UDP/" title="UDP" class="md-nav__link">
      UDP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/使用HttpClient发送HTTPS请求/" title="使用HttpClient发送HTTPS请求" class="md-nav__link">
      使用HttpClient发送HTTPS请求
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/远程调试/" title="远程调试" class="md-nav__link">
      远程调试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/那些年踩过的坑/" title="那些年踩过的坑" class="md-nav__link">
      那些年踩过的坑
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6-35" type="checkbox" id="nav-3-6-35">
    
    <label class="md-nav__link" for="nav-3-6-35">
      Framework
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-6-35">
        Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/framework/Lombok/" title="Lombok" class="md-nav__link">
      Lombok
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/framework/Restlet/" title="Restlet" class="md-nav__link">
      Restlet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/framework/fastjson/" title="fastjson" class="md-nav__link">
      fastjson
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/framework/日志/" title="日志" class="md-nav__link">
      日志
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-6-36" type="checkbox" id="nav-3-6-36">
    
    <label class="md-nav__link" for="nav-3-6-36">
      Lib
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-6-36">
        Lib
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Arrays/" title="Arrays" class="md-nav__link">
      Arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Hashtable/" title="Hashtable" class="md-nav__link">
      Hashtable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Logger/" title="Logger" class="md-nav__link">
      Logger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Queue/" title="Queue" class="md-nav__link">
      Queue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Stack/" title="Stack" class="md-nav__link">
      Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/System_Runtime_Scanner/" title="System_Runtime_Scanner" class="md-nav__link">
      System_Runtime_Scanner
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/java/lib/Vector/" title="Vector" class="md-nav__link">
      Vector
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-7" type="checkbox" id="nav-3-7">
    
    <label class="md-nav__link" for="nav-3-7">
      Javascript
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-7">
        Javascript
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/javascript/AngularJS/" title="AngularJS" class="md-nav__link">
      AngularJS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/javascript/Node.js/" title="Node.js" class="md-nav__link">
      Node.js
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/javascript/Vue.js/" title="Vue.js" class="md-nav__link">
      Vue.js
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-8" type="checkbox" id="nav-3-8">
    
    <label class="md-nav__link" for="nav-3-8">
      Julia
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-8">
        Julia
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/julia/hellojulia/" title="hellojulia" class="md-nav__link">
      hellojulia
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-9" type="checkbox" id="nav-3-9">
    
    <label class="md-nav__link" for="nav-3-9">
      Perl
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-9">
        Perl
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/perl/helloperl/" title="helloperl" class="md-nav__link">
      helloperl
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-10" type="checkbox" id="nav-3-10">
    
    <label class="md-nav__link" for="nav-3-10">
      Php
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-10">
        Php
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/php/hellophp/" title="hellophp" class="md-nav__link">
      hellophp
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11" type="checkbox" id="nav-3-11">
    
    <label class="md-nav__link" for="nav-3-11">
      Python
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-11">
        Python
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x00_hellopython/" title="0x00_hellopython" class="md-nav__link">
      0x00_hellopython
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x01_datatype/" title="0x01_datatype" class="md-nav__link">
      0x01_datatype
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x02_operator/" title="0x02_operator" class="md-nav__link">
      0x02_operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x03_流程控制/" title="0x03_流程控制" class="md-nav__link">
      0x03_流程控制
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x04_迭代器生成器/" title="0x04_迭代器生成器" class="md-nav__link">
      0x04_迭代器生成器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x05_函数/" title="0x05_函数" class="md-nav__link">
      0x05_函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x06_模块/" title="0x06_模块" class="md-nav__link">
      0x06_模块
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x07_io_序列化/" title="0x07_io_序列化" class="md-nav__link">
      0x07_io_序列化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x08_异常/" title="0x08_异常" class="md-nav__link">
      0x08_异常
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x09_类/" title="0x09_类" class="md-nav__link">
      0x09_类
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x0A_库函数/" title="0x0A_库函数" class="md-nav__link">
      0x0A_库函数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x0B_socket/" title="0x0B_socket" class="md-nav__link">
      0x0B_socket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/0x0C_subprocess/" title="0x0C_subprocess" class="md-nav__link">
      0x0C_subprocess
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-14" type="checkbox" id="nav-3-11-14">
    
    <label class="md-nav__link" for="nav-3-11-14">
      Framework
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-11-14">
        Framework
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/framework/Flask/" title="Flask" class="md-nav__link">
      Flask
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/framework/django/" title="django" class="md-nav__link">
      django
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-11-15" type="checkbox" id="nav-3-11-15">
    
    <label class="md-nav__link" for="nav-3-11-15">
      Spider
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-3-11-15">
        Spider
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/spider/0x00_请求/" title="0x00_请求" class="md-nav__link">
      0x00_请求
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/python/spider/0x01_正则表达式/" title="0x01_正则表达式" class="md-nav__link">
      0x01_正则表达式
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-12" type="checkbox" id="nav-3-12">
    
    <label class="md-nav__link" for="nav-3-12">
      Springboot
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-12">
        Springboot
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/springboot/0x00_hellospring/" title="0x00_hellospring" class="md-nav__link">
      0x00_hellospring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/springboot/0x01_SpringMVC/" title="0x01_SpringMVC" class="md-nav__link">
      0x01_SpringMVC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/springboot/0x10_hellospringboot/" title="0x10_hellospringboot" class="md-nav__link">
      0x10_hellospringboot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/springboot/0xFF_注解/" title="0xFF_注解" class="md-nav__link">
      0xFF_注解
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/springboot/SpringCloud/" title="SpringCloud" class="md-nav__link">
      SpringCloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/springboot/aop/" title="aop" class="md-nav__link">
      aop
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-13" type="checkbox" id="nav-3-13">
    
    <label class="md-nav__link" for="nav-3-13">
      Struts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-13">
        Struts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/struts/OGNL/" title="OGNL" class="md-nav__link">
      OGNL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-14" type="checkbox" id="nav-3-14">
    
    <label class="md-nav__link" for="nav-3-14">
      Web
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-14">
        Web
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/HAProxy/" title="HAProxy" class="md-nav__link">
      HAProxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/HTTP错误码/" title="HTTP错误码" class="md-nav__link">
      HTTP错误码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/LVS转发问题抓包定位/" title="LVS转发问题抓包定位" class="md-nav__link">
      LVS转发问题抓包定位
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/URL归一化/" title="URL归一化" class="md-nav__link">
      URL归一化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/curl_wget/" title="curl_wget" class="md-nav__link">
      curl_wget
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/http响应头/" title="http响应头" class="md-nav__link">
      http响应头
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/lvs_keepalived/" title="lvs_keepalived" class="md-nav__link">
      lvs_keepalived
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/nginx/" title="nginx" class="md-nav__link">
      nginx
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/openresty/" title="openresty" class="md-nav__link">
      openresty
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/二维码/" title="二维码" class="md-nav__link">
      二维码
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/web/短网址/" title="短网址算法" class="md-nav__link">
      短网址算法
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-15" type="checkbox" id="nav-3-15">
    
    <label class="md-nav__link" for="nav-3-15">
      Writing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-15">
        Writing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/writing/Atom/" title="Atom" class="md-nav__link">
      Atom
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/writing/Markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/writing/kindle传书/" title="kindle传书" class="md-nav__link">
      kindle传书
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/writing/mkdocs/" title="mkdocs" class="md-nav__link">
      mkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/writing/使用Hexo搭建个人博客/" title="使用Hexo搭建个人博客" class="md-nav__link">
      使用Hexo搭建个人博客
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-16" type="checkbox" id="nav-3-16">
    
    <label class="md-nav__link" for="nav-3-16">
      Xml
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-16">
        Xml
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../coding/xml/CDATA/" title="CDATA" class="md-nav__link">
      CDATA
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Design
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Design
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/优化/" title="优化" class="md-nav__link">
      优化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/架构图/" title="架构图" class="md-nav__link">
      架构图
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/正则表达式/" title="正则表达式" class="md-nav__link">
      正则表达式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Algorithm
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Algorithm
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/backgroud/" title="backgroud" class="md-nav__link">
      backgroud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/recursive_divide_conquer/" title="recursive_divide_conquer" class="md-nav__link">
      recursive_divide_conquer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-3" type="checkbox" id="nav-4-4-3">
    
    <label class="md-nav__link" for="nav-4-4-3">
      Search
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-3">
        Search
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/search/0x00_binary_search/" title="0x00_binary_search" class="md-nav__link">
      0x00_binary_search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/search/0x01_BFS/" title="0x01_BFS" class="md-nav__link">
      0x01_BFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/search/0x02_Dijkstra/" title="0x02_Dijkstra" class="md-nav__link">
      0x02_Dijkstra
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/search/0x03_Greedy/" title="0x03_Greedy" class="md-nav__link">
      0x03_Greedy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/search/0x04_DynamicProgramming/" title="0x04_DynamicProgramming" class="md-nav__link">
      0x04_DynamicProgramming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/search/0x05_KNN/" title="0x05_KNN" class="md-nav__link">
      0x05_KNN
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-4" type="checkbox" id="nav-4-4-4">
    
    <label class="md-nav__link" for="nav-4-4-4">
      Sort
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-4">
        Sort
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/sort/0x00_bubble/" title="0x00_bubble" class="md-nav__link">
      0x00_bubble
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/sort/0x01_select/" title="0x01_select" class="md-nav__link">
      0x01_select
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/algorithm/sort/0x02_quick/" title="0x02_quick" class="md-nav__link">
      0x02_quick
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Data structure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Data structure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/0x00_array_list/" title="0x00_array_list" class="md-nav__link">
      0x00_array_list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/0x01_stack_queue/" title="0x01_stack_queue" class="md-nav__link">
      0x01_stack_queue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/0x02_hashtable/" title="0x02_hashtable" class="md-nav__link">
      0x02_hashtable
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/0x03_binary_search_tree/" title="0x03_binary_search_tree" class="md-nav__link">
      0x03_binary_search_tree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/0x04_grid/" title="0x04_grid" class="md-nav__link">
      0x04_grid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/balance_tree/" title="Balance tree" class="md-nav__link">
      Balance tree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/red_black_tree/" title="红黑树" class="md-nav__link">
      红黑树
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/堆/" title="堆" class="md-nav__link">
      堆
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/data_structure/算法图解/" title="算法图解" class="md-nav__link">
      算法图解
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Design pattern
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        Design pattern
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/design_pattern/catalog/" title="catalog" class="md-nav__link">
      catalog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Leetcode
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        Leetcode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/leetcode/DelOneSort/" title="DelOneSort" class="md-nav__link">
      DelOneSort
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/leetcode/GetPathOfCapacity/" title="GetPathOfCapacity" class="md-nav__link">
      GetPathOfCapacity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/leetcode/LastSubstring/" title="LastSubstring" class="md-nav__link">
      LastSubstring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../design/leetcode/Memory_File_System/" title="Memory_File_System" class="md-nav__link">
      Memory_File_System
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Environment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Environment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/RAID/" title="RAID" class="md-nav__link">
      RAID
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/iSCSI/" title="iSCSI" class="md-nav__link">
      iSCSI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Net
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Net
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/net/greatwall/" title="greatwall" class="md-nav__link">
      greatwall
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/net/ipv6/" title="ipv6" class="md-nav__link">
      ipv6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/net/交换机/" title="交换机" class="md-nav__link">
      交换机
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/net/私网IP地址范围/" title="私网IP地址范围" class="md-nav__link">
      私网IP地址范围
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Os
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Os
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x00_Linux基本命令_shell/" title="0x00_Linux基本命令_shell" class="md-nav__link">
      0x00_Linux基本命令_shell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x01_Linux系统管理_ps_ssh/" title="0x01_Linux系统管理_ps_ssh" class="md-nav__link">
      0x01_Linux系统管理_ps_ssh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x02_Linux用户管理/" title="0x02_Linux用户管理" class="md-nav__link">
      0x02_Linux用户管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x03_Linux磁盘管理/" title="0x03_Linux磁盘管理" class="md-nav__link">
      0x03_Linux磁盘管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x04_Linux文件系统/" title="0x04_Linux文件系统" class="md-nav__link">
      0x04_Linux文件系统
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x05_Linux软件管理/" title="0x05_Linux软件管理" class="md-nav__link">
      0x05_Linux软件管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x06_Linux网络_ip_ifconfig_route_DNS/" title="0x06_Linux网络_ip_ifconfig_route_DNS" class="md-nav__link">
      0x06_Linux网络_ip_ifconfig_route_DNS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x07_Linux图形化/" title="0x07_Linux图形化" class="md-nav__link">
      0x07_Linux图形化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x08_编辑器/" title="0x08_编辑器" class="md-nav__link">
      0x08_编辑器
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x10_Windows/" title="0x10_Windows" class="md-nav__link">
      0x10_Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/0x20_macOS软件管理/" title="0x20_macOS软件管理" class="md-nav__link">
      0x20_macOS软件管理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/Linux中sh和bash的区别/" title="Linux中sh和bash的区别" class="md-nav__link">
      Linux中sh和bash的区别
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/PXE/" title="PXE" class="md-nav__link">
      PXE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/Shebang/" title="Shebang" class="md-nav__link">
      Shebang
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/Tips/" title="Tips" class="md-nav__link">
      Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/find_grep_awk_sed/" title="find_grep_awk_sed" class="md-nav__link">
      find_grep_awk_sed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/linux_namespace/" title="linux_namespace" class="md-nav__link">
      linux_namespace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/macOS_NTFS/" title="macOS_NTFS" class="md-nav__link">
      macOS_NTFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/screen/" title="screen" class="md-nav__link">
      screen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/sudoers文件/" title="sudoers文件" class="md-nav__link">
      sudoers文件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/os/芯片处理器与操作系统版本/" title="芯片处理器与操作系统版本" class="md-nav__link">
      芯片处理器与操作系统版本
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/Git/" title="Git" class="md-nav__link">
      Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/Gradle/" title="Gradle" class="md-nav__link">
      Gradle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/Makefile/" title="Makefile" class="md-nav__link">
      Makefile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/Maven/" title="Maven" class="md-nav__link">
      Maven
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/Notepad++/" title="Notepad++" class="md-nav__link">
      Notepad++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/virtualbox/" title="virtualbox" class="md-nav__link">
      virtualbox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/创建VPN/" title="创建VPN" class="md-nav__link">
      创建VPN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/工具/" title="工具" class="md-nav__link">
      工具
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/开发环境初始化/" title="开发环境初始化" class="md-nav__link">
      开发环境初始化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/快捷键/" title="快捷键" class="md-nav__link">
      快捷键
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../environment/tools/搜狗输入法自定义短语/" title="搜狗输入法自定义短语" class="md-nav__link">
      搜狗输入法自定义短语
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Other
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Other
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/GDP/" title="GDP" class="md-nav__link">
      GDP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/世界500强/" title="世界500强" class="md-nav__link">
      世界500强
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/买房的事情/" title="买房的事情" class="md-nav__link">
      买房的事情
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/保税区与自贸区/" title="保税区与自贸区" class="md-nav__link">
      保税区与自贸区
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/分辨率/" title="分辨率" class="md-nav__link">
      分辨率
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/国家地理/" title="国家地理" class="md-nav__link">
      国家地理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/班车/" title="班车" class="md-nav__link">
      班车
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/看房100问/" title="看房100问" class="md-nav__link">
      看房100问
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/知识产权/" title="知识产权" class="md-nav__link">
      知识产权
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-10" type="checkbox" id="nav-6-10">
    
    <label class="md-nav__link" for="nav-6-10">
      Dts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-10">
        Dts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/dts/SVN_cleanup/" title="SVN_cleanup" class="md-nav__link">
      SVN_cleanup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/dts/git clone时报Please make sure you have the correct access rights and the repository exists/" title="问题现象" class="md-nav__link">
      问题现象
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/dts/hsts/" title="hsts" class="md-nav__link">
      hsts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/dts/request.getParameter()获取不到数据/" title="request.getParameter()获取不到数据" class="md-nav__link">
      request.getParameter()获取不到数据
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-11" type="checkbox" id="nav-6-11">
    
    <label class="md-nav__link" for="nav-6-11">
      Finance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-11">
        Finance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/finance/投资理财/" title="投资理财" class="md-nav__link">
      投资理财
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/finance/汇率/" title="汇率" class="md-nav__link">
      汇率
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-12" type="checkbox" id="nav-6-12">
    
    <label class="md-nav__link" for="nav-6-12">
      Health
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-12">
        Health
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/health/口罩/" title="口罩" class="md-nav__link">
      口罩
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/health/挂号/" title="挂号" class="md-nav__link">
      挂号
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../other/health/鼻炎/" title="鼻炎" class="md-nav__link">
      鼻炎
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Security
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Security
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/GDPR/" title="GDPR" class="md-nav__link">
      GDPR
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/OpenSSL/" title="OpenSSL" class="md-nav__link">
      OpenSSL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/attack_pattern/" title="attack_pattern" class="md-nav__link">
      attack_pattern
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/google_search/" title="google_search" class="md-nav__link">
      google_search
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/kali/" title="kali" class="md-nav__link">
      kali
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_codes/" title="sec_codes" class="md-nav__link">
      sec_codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/密码学/" title="密码学" class="md-nav__link">
      密码学
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/开源及第三方软件/" title="开源及第三方软件" class="md-nav__link">
      开源及第三方软件
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/蠕虫/" title="蠕虫" class="md-nav__link">
      蠕虫
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/远程调用中的反序列化注入/" title="RMI" class="md-nav__link">
      RMI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11" type="checkbox" id="nav-7-11">
    
    <label class="md-nav__link" for="nav-7-11">
      Ctf
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-11">
        Ctf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/getting_started/" title="getting_started" class="md-nav__link">
      getting_started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11-2" type="checkbox" id="nav-7-11-2">
    
    <label class="md-nav__link" for="nav-7-11-2">
      Googlectf
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-11-2">
        Googlectf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/googlectf/google_ctf_2019/" title="google_ctf_2019" class="md-nav__link">
      google_ctf_2019
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11-3" type="checkbox" id="nav-7-11-3">
    
    <label class="md-nav__link" for="nav-7-11-3">
      Hwctf
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-11-3">
        Hwctf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/hwctf/hwctf_20190530/" title="hwctf_20190530" class="md-nav__link">
      hwctf_20190530
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11-4" type="checkbox" id="nav-7-11-4">
    
    <label class="md-nav__link" for="nav-7-11-4">
      Xctf
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-7-11-4">
        Xctf
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/xctf/De1CTF2019/" title="De1CTF2019" class="md-nav__link">
      De1CTF2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/xctf/gettheshell/" title="gettheshell" class="md-nav__link">
      gettheshell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/xctf/rctf2019/" title="rctf2019" class="md-nav__link">
      rctf2019
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/xctf/suctf/" title="suctf" class="md-nav__link">
      suctf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11-4-5" type="checkbox" id="nav-7-11-4-5">
    
    <label class="md-nav__link" for="nav-7-11-4-5">
      Adworld
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-7-11-4-5">
        Adworld
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/xctf/adworld/pwn/" title="pwn" class="md-nav__link">
      pwn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/ctf/xctf/adworld/web/" title="web" class="md-nav__link">
      web
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-12" type="checkbox" id="nav-7-12">
    
    <label class="md-nav__link" for="nav-7-12">
      Cve
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-12">
        Cve
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/cve/Docker基于runC逃逸漏洞/" title="Docker基于runC逃逸漏洞" class="md-nav__link">
      Docker基于runC逃逸漏洞
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/cve/cve_catalog/" title="cve_catalog" class="md-nav__link">
      cve_catalog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-13" type="checkbox" id="nav-7-13">
    
    <label class="md-nav__link" for="nav-7-13">
      Experience
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-13">
        Experience
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/experience/xss_csrf/" title="xss_csrf" class="md-nav__link">
      xss_csrf
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-14" type="checkbox" id="nav-7-14">
    
    <label class="md-nav__link" for="nav-7-14">
      Sec tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-14">
        Sec tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_tools/AntSword/" title="AntSword" class="md-nav__link">
      AntSword
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_tools/IDS_IPS/" title="IDS_IPS" class="md-nav__link">
      IDS_IPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_tools/ncat/" title="ncat" class="md-nav__link">
      ncat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_tools/nmap_netstat/" title="nmap_netstat" class="md-nav__link">
      nmap_netstat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_tools/sec_tools_catalog/" title="sec_tools_catalog" class="md-nav__link">
      sec_tools_catalog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../security/sec_tools/使用Scapy发送UDP数据包/" title="使用Scapy发送UDP数据包" class="md-nav__link">
      使用Scapy发送UDP数据包
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#i-nginx" title="I. 部署 nginx" class="md-nav__link">
    I. 部署 nginx
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iii-terminationgraceperiodseconds" title="III. terminationGracePeriodSeconds" class="md-nav__link">
    III. terminationGracePeriodSeconds
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i-zookeeper" title="I. 部署 ZooKeeper" class="md-nav__link">
    I. 部署 ZooKeeper
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ii-docker" title="II. 准备 Docker 镜像" class="md-nav__link">
    II. 准备 Docker 镜像
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ii-zookeeper-statefulset" title="II. 创建 ZooKeeper StatefulSet" class="md-nav__link">
    II. 创建 ZooKeeper StatefulSet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ii" title="II. 验证" class="md-nav__link">
    II. 验证
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i-kafka" title="I. 部署 Kafka" class="md-nav__link">
    I. 部署 Kafka
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="评论" class="md-nav__link md-nav__link--active">
            评论
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/islibra/wiki/blob/master/docs/cloud/container/0x06_k8s_statefulset.md" title="编辑此页" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="0x06_k8s_statefulset">0x06_k8s_statefulset<a class="headerlink" href="#0x06_k8s_statefulset" title="Permanent link">&para;</a></h1>
<div class="admonition tip">
<p class="admonition-title">short: sts</p>
</div>
<h2 id="i-nginx">I. 部署 nginx<a class="headerlink" href="#i-nginx" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># 1.创建 Service</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">clusterIP</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
  <span class="nt">ports</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">web</span>
  <span class="c1"># 选择标签</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
<span class="nn">---</span>
<span class="c1"># 2.创建 StatefulSet</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="c1"># 指定使用的 Service</span>
  <span class="nt">serviceName</span><span class="p">:</span> <span class="s">&quot;nginx&quot;</span>
  <span class="c1"># 指定存储 PVC</span>
  <span class="nt">volumeClaimTemplates</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">metadata</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">www</span>
      <span class="c1"># annotations:</span>
        <span class="c1"># volume.beta.kubernetes.io/storage-class: anything</span>
    <span class="nt">spec</span><span class="p">:</span>
      <span class="nt">accessModes</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;ReadWriteOnce&quot;</span> <span class="p p-Indicator">]</span>
      <span class="nt">resources</span><span class="p">:</span>
        <span class="nt">requests</span><span class="p">:</span>
          <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
      <span class="nt">storageClassName</span><span class="p">:</span> <span class="s">&quot;manual&quot;</span>
  <span class="c1"># 指定副本数量</span>
  <span class="nt">replicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
  <span class="c1"># 选择标签</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">matchLabels</span><span class="p">:</span>
      <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>  <span class="c1"># has to match spec.template.metadata.labels</span>
  <span class="c1"># 指定 Pod</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">metadata</span><span class="p">:</span>
      <span class="nt">labels</span><span class="p">:</span>
        <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>  <span class="c1"># has to match spec.selector.matchLabels</span>
    <span class="nt">spec</span><span class="p">:</span>
      <span class="nt">terminationGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
      <span class="c1"># 指定容器</span>
      <span class="nt">containers</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
        <span class="nt">ports</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">web</span>
        <span class="nt">volumeMounts</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">www</span>
          <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/usr/share/nginx/html</span>
</pre></div>
</td></tr></table>

<div class="admonition quote">
<p class="admonition-title">参考链接</p>
<ul>
<li><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/statefulset/">StatefulSets - Kubernetes官方</a></li>
<li><a href="https://jimmysong.io/kubernetes-handbook/concepts/statefulset.html">kubernetes-handbook</a></li>
</ul>
</div>
<h3 id="iii-terminationgraceperiodseconds">III. terminationGracePeriodSeconds<a class="headerlink" href="#iii-terminationgraceperiodseconds" title="Permanent link">&para;</a></h3>
<p>K8s 滚动升级的步骤:</p>
<ol>
<li>K8s 首先启动新的 Pod</li>
<li>K8s 等待新的 Pod 进入 Ready 状态</li>
<li>K8s 创建 Endpoint，将新的 Pod 纳入负载均衡</li>
<li>K8s 移除与老 Pod 相关的 Endpoint，并且将老 Pod 状态设置为 Terminating，此时将不会有新的请求到达老 Pod</li>
<li>同时 K8s 会给老 Pod 发送 SIGTERM 信号，并且等待 terminationGracePeriodSeconds 时间。(默认为30秒)</li>
<li>超过 terminationGracePeriodSeconds 等待时间后， K8s 会强制结束老 Pod</li>
</ol>
<div class="admonition quote">
<p class="admonition-title"><a href="https://damoshushu.github.io/2019/01/12/k8s-terminationGracePeriodSeconds/">如何利用terminationGracePeriodSeconds 优雅地关闭你的服务？</a></p>
</div>
<h2 id="i-zookeeper">I. 部署 ZooKeeper<a class="headerlink" href="#i-zookeeper" title="Permanent link">&para;</a></h2>
<blockquote>
<p>手动准备三个 1 GiB 的 PV。</p>
</blockquote>
<h3 id="ii-docker">II. 准备 Docker 镜像<a class="headerlink" href="#ii-docker" title="Permanent link">&para;</a></h3>
<ul>
<li>Ubuntu/BusyBox/Alpine</li>
<li>OpenJDK</li>
<li>ZooKeeper</li>
</ul>
<blockquote>
<p>非 root 运行, zookeeper</p>
<p>安装目录: /opt/zookeeper</p>
<p>配置目录: /usr/etc/zookeeper</p>
<p>二进制目录: /usr/bin</p>
<p>数据目录: /var/lib/zookeeper</p>
</blockquote>
<ul>
<li>
<p>zkGenConfig.sh: 生成 ZK 配置文件</p>
<ul>
<li>/opt/kafka/conf/zoo.cfg</li>
<li>/opt/kafka/conf/log4j.properties</li>
<li>/opt/kafka/conf/java.env</li>
<li>/var/lib/zookeeper/data/myid</li>
</ul>
</li>
<li>
<p>zkOk.sh: 健康检查</p>
</li>
<li>zkMetrics.sh</li>
</ul>
<h3 id="ii-zookeeper-statefulset">II. 创建 ZooKeeper StatefulSet<a class="headerlink" href="#ii-zookeeper-statefulset" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># 1.创建 Headless Service</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-hs</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">clusterIP</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
  <span class="nt">ports</span><span class="p">:</span>
  <span class="c1"># follow leader 的 event log</span>
  <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2888</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server</span>
  <span class="c1"># leader 选举</span>
  <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3888</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">leader-election</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
<span class="nn">---</span>
<span class="c1"># 2.创建 Service</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cs</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">ports</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2181</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
<span class="nn">---</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">jvm.heap</span><span class="p">:</span> <span class="s">&quot;1G&quot;</span>
  <span class="nt">tick</span><span class="p">:</span> <span class="s">&quot;2000&quot;</span>
  <span class="nt">init</span><span class="p">:</span> <span class="s">&quot;10&quot;</span>
  <span class="nt">sync</span><span class="p">:</span> <span class="s">&quot;5&quot;</span>
  <span class="nt">client.cnxns</span><span class="p">:</span> <span class="s">&quot;60&quot;</span>
  <span class="nt">snap.retain</span><span class="p">:</span> <span class="s">&quot;3&quot;</span>
  <span class="nt">purge.interval</span><span class="p">:</span> <span class="s">&quot;0&quot;</span>
<span class="nn">---</span>
<span class="c1"># 确保应用高可用, 了解 Pod 中断类型, 自动升级和扩缩容</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">policy/v1beta1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PodDisruptionBudget</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-pdb</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">maxUnavailable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">matchLabels</span><span class="p">:</span>
      <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
<span class="nn">---</span>
<span class="c1"># 3.创建 StatefulSet</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="c1"># 指定使用的 Service</span>
  <span class="nt">serviceName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-hs</span>
  <span class="c1"># 指定存储 PVC</span>
  <span class="nt">volumeClaimTemplates</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">metadata</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">datadir</span>
    <span class="nt">spec</span><span class="p">:</span>
      <span class="nt">accessModes</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;ReadWriteMany&quot;</span> <span class="p p-Indicator">]</span>
      <span class="nt">resources</span><span class="p">:</span>
        <span class="nt">requests</span><span class="p">:</span>
          <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
      <span class="nt">storageClassName</span><span class="p">:</span> <span class="s">&quot;manual&quot;</span>
  <span class="c1"># 指定副本数量</span>
  <span class="nt">replicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
  <span class="nt">updateStrategy</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RollingUpdate</span>
  <span class="nt">podManagementPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">OrderedReady</span>
  <span class="c1"># 选择标签</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">matchLabels</span><span class="p">:</span>
      <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
  <span class="c1"># 指定 Pod</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">metadata</span><span class="p">:</span>
      <span class="nt">labels</span><span class="p">:</span>
        <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
    <span class="nt">spec</span><span class="p">:</span>
      <span class="c1"># 反亲和</span>
      <span class="nt">affinity</span><span class="p">:</span>
        <span class="nt">podAntiAffinity</span><span class="p">:</span>
          <span class="nt">requiredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span>
            <span class="p p-Indicator">-</span> <span class="nt">labelSelector</span><span class="p">:</span>
                <span class="nt">matchExpressions</span><span class="p">:</span>
                  <span class="p p-Indicator">-</span> <span class="nt">key</span><span class="p">:</span> <span class="s">&quot;app&quot;</span>
                    <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">In</span>
                    <span class="nt">values</span><span class="p">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
              <span class="nt">topologyKey</span><span class="p">:</span> <span class="s">&quot;kubernetes.io/hostname&quot;</span>
      <span class="c1"># 安全上下文</span>
      <span class="nt">securityContext</span><span class="p">:</span>
        <span class="nt">runAsUser</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1001</span>
        <span class="nt">fsGroup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1001</span>
      <span class="c1"># 指定容器</span>
      <span class="nt">containers</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kubernetes-zookeeper</span>
        <span class="nt">image</span><span class="p">:</span> <span class="s">&quot;k8s.gcr.io/kubernetes-zookeeper:1.0-3.4.10&quot;</span>
        <span class="nt">imagePullPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
        <span class="nt">resources</span><span class="p">:</span>
          <span class="nt">requests</span><span class="p">:</span>
            <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
            <span class="nt">cpu</span><span class="p">:</span> <span class="s">&quot;0.5&quot;</span>
        <span class="nt">ports</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2181</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client</span>
        <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2888</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server</span>
        <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3888</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">leader-election</span>
        <span class="nt">volumeMounts</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">datadir</span>
          <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/zookeeper</span>
        <span class="nt">env</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_REPLICAS</span>
          <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;3&quot;</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_ENSEMBLE</span>
          <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;zk-0;zk-1;zk-2&quot;</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_CLIENT_PORT</span>
          <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;2181&quot;</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_SERVER_PORT</span>
          <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;2888&quot;</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_ELECTION_PORT</span>
          <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;3888&quot;</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_HEAP_SIZE</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">jvm.heap</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_TICK_TIME</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tick</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_INIT_LIMIT</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">init</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_SYNC_LIMIT</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tick</span>
        <span class="p p-Indicator">-</span> <span class="nt">name </span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_MAX_CLIENT_CNXNS</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">client.cnxns</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_SNAP_RETAIN_COUNT</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">snap.retain</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ZK_PURGE_INTERVAL</span>
          <span class="nt">valueFrom</span><span class="p">:</span>
            <span class="nt">configMapKeyRef</span><span class="p">:</span>
                <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">zk-cm</span>
                <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">purge.interval</span>
        <span class="nt">command</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sh</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">zkGenConfig.sh &amp;&amp; zookeeper-server-start.sh start-foreground</span>
        <span class="nt">readinessProbe</span><span class="p">:</span>
          <span class="nt">exec</span><span class="p">:</span>
            <span class="nt">command</span><span class="p">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sh</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
            <span class="p p-Indicator">-</span> <span class="s">&quot;zkOk.sh&quot;</span>
          <span class="nt">initialDelaySeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
          <span class="nt">timeoutSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
        <span class="nt">livenessProbe</span><span class="p">:</span>
          <span class="nt">exec</span><span class="p">:</span>
            <span class="nt">command</span><span class="p">:</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sh</span>
            <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
            <span class="p p-Indicator">-</span> <span class="s">&quot;zkOk.sh&quot;</span>
          <span class="nt">initialDelaySeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">15</span>
          <span class="nt">timeoutSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</td></tr></table>

<h3 id="ii">II. 验证<a class="headerlink" href="#ii" title="Permanent link">&para;</a></h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>$ kubectl <span class="nb">exec</span> zk-0 zkMetrics.sh
$ kubectl <span class="nb">exec</span> zk-0 zkCli.sh create /hello world
$ kubectl <span class="nb">exec</span> zk-1 zkCli.sh get /hello

<span class="c1"># 唯一的 hostname</span>
$ <span class="k">for</span> i in <span class="m">0</span> <span class="m">1</span> <span class="m">2</span><span class="p">;</span> <span class="k">do</span> kubectl <span class="nb">exec</span> zk-<span class="nv">$i</span> -- hostname<span class="p">;</span> <span class="k">done</span>
zk-0
zk-1
zk-2

<span class="c1"># 唯一的 server ID</span>
$ <span class="k">for</span> i in <span class="m">0</span> <span class="m">1</span> <span class="m">2</span><span class="p">;</span> <span class="k">do</span> <span class="nb">echo</span> <span class="s2">&quot;myid zk-</span><span class="nv">$i</span><span class="s2">&quot;</span><span class="p">;</span>kubectl <span class="nb">exec</span> zk-<span class="nv">$i</span> -- cat /var/lib/zookeeper/data/myid<span class="p">;</span> <span class="k">done</span>
myid zk-0
<span class="m">1</span>
myid zk-1
<span class="m">2</span>
myid zk-2
<span class="m">3</span>

<span class="c1"># 唯一的 Fully Qualified Domain Name (FQDN)</span>
<span class="c1"># Pod 名称.Service 名称.Namespace.svc.cluster.local</span>
$ <span class="k">for</span> i in <span class="m">0</span> <span class="m">1</span> <span class="m">2</span><span class="p">;</span> <span class="k">do</span> kubectl <span class="nb">exec</span> zk-<span class="nv">$i</span> -- hostname -f<span class="p">;</span> <span class="k">done</span>
zk-0.zk-hs.default.svc.cluster.local
zk-1.zk-hs.default.svc.cluster.local
zk-2.zk-hs.default.svc.cluster.local

<span class="c1"># 查看 server 配置</span>
<span class="c1"># 以 myid 作为 server 的后缀</span>
$ kubectl <span class="nb">exec</span> zk-0 -- cat /opt/zookeeper/conf/zoo.cfg
<span class="c1">#This file was autogenerated DO NOT EDIT</span>
<span class="nv">clientPort</span><span class="o">=</span><span class="m">2181</span>
<span class="nv">dataDir</span><span class="o">=</span>/var/lib/zookeeper/data
<span class="nv">dataLogDir</span><span class="o">=</span>/var/lib/zookeeper/data/log
<span class="nv">tickTime</span><span class="o">=</span><span class="m">2000</span>
<span class="nv">initLimit</span><span class="o">=</span><span class="m">10</span>
<span class="nv">syncLimit</span><span class="o">=</span><span class="m">5</span>
<span class="nv">maxClientCnxns</span><span class="o">=</span><span class="m">60</span>
<span class="nv">minSessionTimeout</span><span class="o">=</span><span class="m">4000</span>
<span class="nv">maxSessionTimeout</span><span class="o">=</span><span class="m">40000</span>
autopurge.snapRetainCount<span class="o">=</span><span class="m">3</span>
autopurge.purgeInteval<span class="o">=</span><span class="m">12</span>
server.1<span class="o">=</span>zk-0.zk-hs.default.svc.cluster.local:2888:3888
server.2<span class="o">=</span>zk-1.zk-hs.default.svc.cluster.local:2888:3888
server.3<span class="o">=</span>zk-2.zk-hs.default.svc.cluster.local:2888:3888
</pre></div>
</td></tr></table>

<div class="admonition quote">
<p class="admonition-title"><a href="https://kubernetes.io/zh/docs/tutorials/stateful-application/zookeeper/">运行 ZooKeeper， 一个 CP 分布式系统 - Kubernetes官方</a></p>
<p>中文版未更新及时, 查看英文版: <a href="(https://kubernetes.io/docs/tutorials/stateful-application/zookeeper/)">Running ZooKeeper, A Distributed System Coordinator</a></p>
</div>
<h2 id="i-kafka">I. 部署 Kafka<a class="headerlink" href="#i-kafka" title="Permanent link">&para;</a></h2>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># 1.创建 Headless Service</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Service</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka-svc</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">clusterIP</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">None</span>
  <span class="nt">ports</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9092</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
<span class="nn">---</span>
<span class="c1"># 2.创建 StatefulSet</span>
<span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">apps/v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="c1"># 指定使用的 Service</span>
  <span class="nt">serviceName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka-svc</span>
  <span class="c1"># 指定存储 PVC</span>
  <span class="nt">volumeClaimTemplates</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">metadata</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">datadir</span>
    <span class="nt">spec</span><span class="p">:</span>
      <span class="nt">accessModes</span><span class="p">:</span> <span class="p p-Indicator">[</span> <span class="s">&quot;ReadWriteMany&quot;</span> <span class="p p-Indicator">]</span>
      <span class="nt">resources</span><span class="p">:</span>
        <span class="nt">requests</span><span class="p">:</span>
          <span class="nt">storage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1Gi</span>
      <span class="nt">storageClassName</span><span class="p">:</span> <span class="s">&quot;manual&quot;</span>
  <span class="c1"># 指定副本数量</span>
  <span class="nt">replicas</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
  <span class="c1"># 选择标签</span>
  <span class="nt">selector</span><span class="p">:</span>
    <span class="nt">matchLabels</span><span class="p">:</span>
      <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
  <span class="c1"># 指定 Pod</span>
  <span class="nt">template</span><span class="p">:</span>
    <span class="nt">metadata</span><span class="p">:</span>
      <span class="nt">labels</span><span class="p">:</span>
        <span class="nt">app</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
    <span class="nt">spec</span><span class="p">:</span>
      <span class="c1"># 反亲和</span>
      <span class="nt">affinity</span><span class="p">:</span>
        <span class="nt">podAntiAffinity</span><span class="p">:</span>
          <span class="nt">requiredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span>
            <span class="p p-Indicator">-</span> <span class="nt">labelSelector</span><span class="p">:</span>
                <span class="nt">matchExpressions</span><span class="p">:</span>
                  <span class="p p-Indicator">-</span> <span class="nt">key</span><span class="p">:</span> <span class="s">&quot;app&quot;</span>
                    <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">In</span>
                    <span class="nt">values</span><span class="p">:</span>
                    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
              <span class="nt">topologyKey</span><span class="p">:</span> <span class="s">&quot;kubernetes.io/hostname&quot;</span>
        <span class="nt">podAffinity</span><span class="p">:</span>
          <span class="nt">preferredDuringSchedulingIgnoredDuringExecution</span><span class="p">:</span>
             <span class="p p-Indicator">-</span> <span class="nt">weight</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
               <span class="nt">podAffinityTerm</span><span class="p">:</span>
                 <span class="nt">labelSelector</span><span class="p">:</span>
                    <span class="nt">matchExpressions</span><span class="p">:</span>
                      <span class="p p-Indicator">-</span> <span class="nt">key</span><span class="p">:</span> <span class="s">&quot;app&quot;</span>
                        <span class="nt">operator</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">In</span>
                        <span class="nt">values</span><span class="p">:</span>
                        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">zk</span>
                 <span class="nt">topologyKey</span><span class="p">:</span> <span class="s">&quot;kubernetes.io/hostname&quot;</span>
      <span class="c1"># 安全上下文</span>
      <span class="nt">securityContext</span><span class="p">:</span>
        <span class="nt">runAsUser</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1001</span>
        <span class="nt">fsGroup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1001</span>
      <span class="c1"># 关闭服务</span>
      <span class="nt">terminationGracePeriodSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
      <span class="c1"># 指定容器</span>
      <span class="nt">containers</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kubernetes-kafka</span>
        <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka:v1.0</span>
        <span class="nt">imagePullPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
        <span class="nt">resources</span><span class="p">:</span>
          <span class="nt">requests</span><span class="p">:</span>
            <span class="nt">memory</span><span class="p">:</span> <span class="s">&quot;1Gi&quot;</span>
            <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">500m</span>
        <span class="nt">ports</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9092</span>
          <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">server</span>
        <span class="nt">volumeMounts</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">datadir</span>
          <span class="nt">mountPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/kafka</span>
        <span class="nt">command</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">sh</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-c</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;bin/kafka-server-start.sh</span><span class="nv"> </span><span class="s">config/server.properties</span><span class="nv"> </span><span class="s">\</span>
          <span class="s">--override</span><span class="nv"> </span><span class="s">broker.id=${HOSTNAME##*-}</span><span class="nv"> </span><span class="s">\</span>
          <span class="s">--override</span><span class="nv"> </span><span class="s">zookeeper.connect=10.97.205.89:2181&quot;</span>
        <span class="nt">env</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">KAFKA_HEAP_OPTS</span>
          <span class="nt">value </span><span class="p">:</span> <span class="s">&quot;-Xmx512M</span><span class="nv"> </span><span class="s">-Xms512M&quot;</span>
        <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">KAFKA_OPTS</span>
          <span class="nt">value</span><span class="p">:</span> <span class="s">&quot;-Dlogging.level=INFO&quot;</span>
</pre></div>
</td></tr></table>

<div class="admonition quote">
<p class="admonition-title"><a href="https://github.com/kubernetes-retired/contrib/tree/master/statefulsets">示例代码</a></p>
</div>
                
                  
                
              
              
                



  <h2 id="__comments" data-no-instant>评论</h2>
  <form id="gitalk-form" onsubmit="return false;" data-no-instant>
    <div id="gitalk-container" data-no-instant></div>
  </form>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script>
  <script src="https://cdnjs.loli.net/ajax/libs/blueimp-md5/2.10.0/js/md5.min.js"></script>
  <script>
    const gitalk = new Gitalk({
      clientID: '731aec4fb0d6c910ea1c',
      clientSecret: '0122498e12a52f99bd3356ac3ad2da17b5e4d322',
      repo: 'comment',
      owner: 'islibra',
      admin: ['islibra'],
      id: md5(location.pathname),
      distractionFreeMode: false,
      pagerDirection: 'last'
    })
    gitalk.render('gitalk-container')
  </script>

              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../0x04_k8s_rolling_update_healthcheck/" title="0x04_k8s_rolling_update_healthcheck" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                0x04_k8s_rolling_update_healthcheck
              </span>
            </div>
          </a>
        
        
          <a href="../0x10_Docker/" title="0x10_Docker" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                0x10_Docker
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 - 2019 李晓龙
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.39abc4af.js"></script>
      
        
        
          
          <script src="../../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../../../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../../../assets/javascripts/lunr/lunr.ja.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>